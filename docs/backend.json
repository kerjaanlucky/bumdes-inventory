{
  "entities": {
    "Branch": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Branch",
      "type": "object",
      "description": "Represents a branch of the business, each holding its own inventory.",
      "properties": {
        "id": { "type": "string", "description": "Unique identifier for the Branch entity." },
        "name": { "type": "string", "description": "Name of the branch." },
        "address": { "type": "string", "description": "Address of the branch." }
      },
      "required": ["name", "address"]
    },
    "UserProfile": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "UserProfile",
      "type": "object",
      "description": "Represents a user's profile information.",
      "properties": {
        "uid": { "type": "string", "description": "The user's unique ID, matching their Firebase Auth UID." },
        "email": { "type": "string", "description": "The user's email address.", "format": "email" },
        "name": { "type": "string", "description": "The display name of the user." },
        "role": { "type": "string", "description": "The role of the user.", "enum": ["admin", "user"] },
        "branchId": { "type": "string", "description": "The ID of the branch the user is assigned to." }
      },
      "required": ["uid", "email", "name", "role", "branchId"]
    },
    "Item": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Item",
      "type": "object",
      "description": "Represents a master item in the inventory.",
      "properties": {
        "name": { "type": "string", "description": "Name of the item." },
        "description": { "type": "string", "description": "Description of the item." },
        "unit": { "type": "string", "description": "Unit of measure for the item." },
        "branchId": { "type": "string", "description": "The ID of the branch that owns this item." },
        "status": { "type": "string", "enum": ["Tersedia", "Tidak Tersedia"], "description": "Availability status of the product." }
      },
      "required": ["name", "description", "unit", "branchId", "status"]
    },
    "Category": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Category",
      "type": "object",
      "description": "Represents a product category.",
      "properties": {
        "nama_kategori": { "type": "string", "description": "Name of the category." },
        "branchId": { "type": "string", "description": "The ID of the branch this category belongs to." }
      },
      "required": ["nama_kategori", "branchId"]
    },
     "Unit": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Unit",
      "type": "object",
      "description": "Represents a product unit.",
      "properties": {
        "nama_satuan": { "type": "string", "description": "Name of the unit." },
        "branchId": { "type": "string", "description": "The ID of the branch this unit belongs to." }
      },
      "required": ["nama_satuan", "branchId"]
    },
    "Customer": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Customer",
      "type": "object",
      "description": "Represents a customer.",
      "properties": {
        "nama_customer": { "type": "string", "description": "Name of the customer." },
        "alamat": { "type": "string", "description": "Address of the customer." },
        "telepon": { "type": "string", "description": "Phone number of the customer." },
        "email": { "type": "string", "description": "Email of the customer.", "format": "email" },
        "branchId": { "type": "string", "description": "The ID of the branch this customer belongs to." }
      },
      "required": ["nama_customer", "branchId"]
    },
    "Supplier": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Supplier",
      "type": "object",
      "description": "Represents a supplier.",
      "properties": {
        "nama_supplier": { "type": "string", "description": "Name of the supplier." },
        "alamat": { "type": "string", "description": "Address of the supplier." },
        "telepon": { "type": "string", "description": "Phone number of the supplier." },
        "email": { "type": "string", "description": "Email of the supplier.", "format": "email" },
        "branchId": { "type": "string", "description": "The ID of the branch this supplier belongs to." }
      },
      "required": ["nama_supplier", "branchId"]
    },
    "Purchase": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Purchase",
      "type": "object",
      "description": "Represents a purchase order.",
      "properties": {
        "purchaseDate": { "type": "string", "format": "date-time" },
        "totalAmount": { "type": "number" },
        "branchId": { "type": "string", "description": "The ID of the branch that made the purchase." }
      },
      "required": ["purchaseDate", "totalAmount", "branchId"]
    },
    "Sale": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Sale",
      "type": "object",
      "description": "Represents a sales transaction.",
      "properties": {
        "saleDate": { "type": "string", "format": "date-time" },
        "totalAmount": { "type": "number" },
        "branchId": { "type": "string", "description": "The ID of the branch where the sale occurred." }
      },
      "required": ["saleDate", "totalAmount", "branchId"]
    },
    "SaleItem": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "SaleItem",
      "type": "object",
      "description": "Represents an item within a sales transaction.",
      "properties": {
        "produk_id": { "type": "string" },
        "jumlah": { "type": "number" },
        "harga_jual_satuan": { "type": "number" },
        "saleId": { "type": "string" }
      },
      "required": ["produk_id", "jumlah", "harga_jual_satuan", "saleId"]
    },
    "ExpenseCategory": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "ExpenseCategory",
      "type": "object",
      "description": "Represents a category for expenses.",
      "properties": {
        "nama_kategori": { "type": "string", "description": "Name of the expense category." },
        "branchId": { "type": "string", "description": "The ID of the branch this category belongs to." }
      },
      "required": ["nama_kategori", "branchId"]
    },
    "Expense": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Expense",
      "type": "object",
      "description": "Represents an operational expense.",
      "properties": {
        "tanggal": { "type": "string", "format": "date-time", "description": "Date of the expense." },
        "jumlah": { "type": "number", "description": "Amount of the expense." },
        "kategori_id": { "type": "string", "description": "ID of the expense category." },
        "nama_kategori": { "type": "string", "description": "Name of the expense category." },
        "deskripsi": { "type": "string", "description": "Description of the expense." },
        "branchId": { "type": "string", "description": "The ID of the branch where the expense occurred." }
      },
      "required": ["tanggal", "jumlah", "kategori_id", "deskripsi", "branchId"]
    }
  },
  "auth": {
    "providers": ["password", "anonymous", "google.com"]
  },
  "firestore": {
    "/branches/{branchId}": { "schema": { "$ref": "#/entities/Branch" }, "description": "Stores branch information." },
    "/users/{userId}": { "schema": { "$ref": "#/entities/UserProfile" }, "description": "Stores user profile information." },
    "/products/{productId}": { "schema": { "$ref": "#/entities/Item" }, "description": "Stores item master data." },
    "/categories/{categoryId}": { "schema": { "$ref": "#/entities/Category" }, "description": "Stores product categories." },
    "/units/{unitId}": { "schema": { "$ref": "#/entities/Unit" }, "description": "Stores product units." },
    "/customers/{customerId}": { "schema": { "$ref": "#/entities/Customer" }, "description": "Stores customer information." },
    "/suppliers/{supplierId}": { "schema": { "$ref": "#/entities/Supplier" }, "description": "Stores supplier information." },
    "/purchases/{purchaseId}": { "schema": { "$ref": "#/entities/Purchase" }, "description": "Stores purchase orders." },
    "/sales/{saleId}": { "schema": { "$ref": "#/entities/Sale" }, "description": "Stores sales transactions." },
    "/sales/{saleId}/saleItems/{saleItemId}": { "schema": { "$ref": "#/entities/SaleItem" }, "description": "Stores items for a specific sale." },
    "/expenseCategories/{expenseCategoryId}": { "schema": { "$ref": "#/entities/ExpenseCategory"}, "description": "Stores expense categories."},
    "/expenses/{expenseId}": { "schema": { "$ref": "#/entities/Expense"}, "description": "Stores operational expenses."}
  }
}
